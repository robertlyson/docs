
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuration</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Packetbeat reference [1.0.0-beta3]" /><link rel="up" href="index.html" title="Packetbeat reference [1.0.0-beta3]" /><link rel="prev" href="packetbeat-getting-started.html" title="Getting started" /><link rel="next" href="capturing-options.html" title="Traffic capturing options" />
  
  	
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link type="text/css" rel="stylesheet" href="/static/css/en-us.css" />
 	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?change=123">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<script type="text/javascript">visitor_count = ""</script>
<script type="text/javascript">mod_value = ""</script>


	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/cluster-small.png" />

	<link rel="shortcut icon" href="/favicon.ico?change=550" type="image/x-icon">
	<link rel="icon" href="/favicon.ico?change=550" type="image/x-icon">
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png?change=550">

	<!-- For iPhone with high-resolution Retina display: -->

	<link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png?change=550">

	<!-- For first- and second-generation iPad: -->

	<link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png?change=550">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="/static/css/style.css?clr=551" />	
	<script src="/static/js/skel.min.js"></script>
	<script type="text/javascript">form_name = "guide_template"</script>
	<script src="/static/js/init.js?clr=551"></script>
	<script src="/static/js/classie.js"></script>
	<script src="/static/js/jquery.min.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


<div class="container w100">
	<div class="row">
		<div class="12u">
			

<section class="first-container">
	<div class="row">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<!-- Searchbar Input box -->
			<form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> 
		</div>
		<div class="4u 6u(small) 6u(xsmall)">
			<!-- Mobile Menu -->
			<div class="mobile-menu-wrapper">
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>											
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >hosted elasticsearch</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/found" id="nav_found" >Found</a></h3>

								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			</div>
			<!-- Shortcuts -->
			<nav id="shortcuts">
				<ul class="links">
					
						<li class="shortcut-1 grayscale">
							<a href="/downloads" id="header_downloads" >
								<span class="img"></span>
								<span class="txt">downloads</span>	
							</a>
						</li>
					
						<li class="shortcut-2 grayscale">
							<a href="/guide" id="header_guide" >
								<span class="img"></span>
								<span class="txt">docs</span>	
							</a>
						</li>
					
						<li class="shortcut-3 grayscale">
							<a href="/subscriptions" id="header_subscriptions" >
								<span class="img"></span>
								<span class="txt">support</span>	
							</a>
						</li>
					
						<li class="shortcut-4 grayscale">
							<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
								<span class="img"></span>
								<span class="txt">discuss</span>	
							</a>
						</li>
					
						<li class="shortcut-5 grayscale">
							<a href="/contact" id="header_contact" >
								<span class="img"></span>
								<span class="txt">contact</span>	
							</a>
						</li>
					
				</ul>
			</nav>
		</div>
	</div>
</section>


<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >hosted elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/found" id="nav_found"   >Found</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div class="languages-wrapper">
				<div class="global-language">
					<img src="/static/img/icon-globe.png"/>
					<ul class="all-languages">
						
							<li><a href="/">English</a></li>
						
							<li><a href="/fr/">French</a></li>
						
							<li><a href="/de/">German</a></li>
						
							<li><a href="/jp/">Japanese</a></li>
						
							<li><a href="/kr/">Korean</a></li>
						
					</ul>
				</div>
				<div id="searchbar">
					<form method="get" action="/search" name="searchForm" id="searchfrm">
						<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
						<button class="button icon" onclick="searchForm.submit()">GO</button>
					</form>
				</div>
				<div class="nav-auto-complete"></div>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		#shortcuts ul.links li.shortcut-1 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-2 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-3 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-4 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-5 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
	
	
		.m-shortcuts li a.m-search {
			background: url("/assets/blt174b13be89ff803c/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("/assets/blt5ba03f594a7d610a/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("/assets/blt38c3e853c4b1174d/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Packetbeat reference
      [1.0.0-beta3]
    </a></span> » <span class="breadcrumb-node">Configuration</span></div><div class="navheader"><span class="prev"><a href="packetbeat-getting-started.html">
              « 
              Getting started</a>
           
        </span><span class="next">
           
          <a href="capturing-options.html">Traffic capturing options
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="configuration"></a>Configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p>The Packetbeat configuration file uses
<a class="ulink" href="http://yaml.org/" target="_top">YAML</a> for its syntax. It consists of the following sections:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="configuration.html#configuration-shipper" title="Shipper">Shipper</a>
</li><li class="listitem">
<a class="xref" href="configuration.html#configuration-interfaces" title="Interfaces">Interfaces</a>
</li><li class="listitem">
<a class="xref" href="configuration.html#configuration-protocols" title="Protocols">Protocols</a>
</li><li class="listitem">
<a class="xref" href="configuration.html#configuration-output" title="Outputs">Outputs</a>
</li><li class="listitem">
<a class="xref" href="configuration.html#configuration-processes" title="Processes (optional)">Processes (optional)</a>
</li><li class="listitem">
<a class="xref" href="configuration.html#configuration-run-options" title="Run options (optional)">Run options (optional)</a>
</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-shipper"></a>Shipper<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The shipper section contains options for the Packetbeat shipper itself and some
general settings regarding its behaviour.</p><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">shipper:
  # The name of the shipper that publishes the network data. It can be used to group
  # all the transactions sent by a single shipper in the web interface.
  # If this options is not defined, the hostname is used.
  #name:

  # The tags of the shipper are included in their own field with each
  # transaction published. Tags make it easy to group servers by different
  # logical properties.
  tags: ["service-X", "web-tier"]

  # Uncomment the following if you want to ignore transactions created
  # by the server on which the shipper is installed. This option is useful
  # to remove duplicates if shippers are installed on multiple servers.
  ignore_outgoing: true

  # How often (in seconds) shippers are publishing their IPs to the topology map.
  # The default is 10 seconds.
  refresh_topology_freq: 10

  # Expiration time (in seconds) of the IPs published by a shipper to the topology map.
  # All the IPs will be deleted afterwards. Note, that the value must be higher than
  # refresh_topology_freq. The default is 15 seconds.
  topology_expire: 15</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options"></a>Options<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_name"></a>name<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The name of the Packetbeat shipper. If empty, the <code class="literal">hostname</code> of the server is
used. This information is included in each transaction (the <code class="literal">shipper</code> field)
published by the shipper and it can be used to group all the transactions sent by
a single shipper.</p><p>At startup, every Packetbeat shipper registers itself to the network topology by
publishing to Elasticsearch the IP and port together with its shipper name. This
information is used to set both the <code class="literal">server</code> and <code class="literal">client_server</code> fields
from transactions even when they are sniffed by another shipper.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">shipper:
  name: "my-shipper"</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_tags"></a>tags<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The tags of the shipper are included in the <code class="literal">tags</code> field with each transaction
published. Tags make it easy to group servers by different logical properties.
For example, if you have a cluster of web servers, you can add to the shippers on
each of them the tag "webservers" and then use filters and queries in the
Kibana web interface to get visualisations for the whole group of servers.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">shipper:
  tags: ["my-service", "hardware", "test"]</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_ignore_outgoing"></a>ignore_outgoing<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If the <code class="literal">ignore_outgoing</code> option is enabled, Packetbeat shipper ignores all the
transactions initiated from the server running the shipper.</p><p>This is useful when two shippers publish the same transactions because one sees
it in its outgoing queue and the other sees it in its incoming queue. In order
to remove the duplications, you can enable this option on one of the servers.</p><p><span class="inlinemediaobject"><img src="./images/option_ignore_outgoing.png" alt="Shippers Architecture" /></span></p><p>For example, in case a shipper is installed on each server from a 3 servers
architecture, t1 is the transaction exchanged between Server1 and Server2 and
t2 is the transaction between Server2 and Server3, then both transactions are
indexed twice as Shipper2 sees both transactions:</p><p>Published transactions (ignore outgoing is false):</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Shipper1: t1
</li><li class="listitem">
Shipper2: t1 and t2
</li><li class="listitem">
Shipper3: t2
</li></ul></div><p>To avoid duplications, you can enforce your shippers to send only the incoming
transactions and ignore the transactions created by the local server:</p><p>Published transactions (ignore outgoing is true):</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Shipper1: none
</li><li class="listitem">
Shipper2: t1
</li><li class="listitem">
Shipper3: t2
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_refresh_topology_freq"></a>refresh_topology_freq<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This setting settings controls the refreshing interval of the topology map in
seconds. In other words, how often each shipper publishes its IP addresses to the
topology map. The default is 10 seconds.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_topology_expire"></a>topology_expire<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This setting controls the expiration time for the topology in seconds. This is
useful in case a shipper stops publishing its IP addresses.  The IP addresses
are removed automatically from the topology map after expiration. The default
is 15 seconds.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-interfaces"></a>Interfaces<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <code class="literal">interfaces</code> section configures the sniffer. Here is a sample
configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml"># Select the network interfaces to sniff the data. You can use the "any"
# keyword to sniff on all connected interfaces.
interfaces:
  # On which device to sniff
  device: any

  # The maximum capture size of a single packet.
  snaplen: 1514

  # The type of the sniffer to use
  type: af_packet

  # The size of the sniffing buffer
  buffer_size_mb: 100</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options_2"></a>Options<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_device"></a>device<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Configures the network devices from which the traffic is
captured. The configured device is set automatically in promiscuous mode,
meaning that it can capture traffic from other hosts of the same LAN.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0</pre></div><p>Alternatively, on Linux the Packetbeat shipper supports capturing of all
messages sent or received by the server on which it is installed. For this, use
the special "any" device.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When using the "any" device, the interfaces are not set
      in promiscuous mode.</p></div></div><p>This option also accepts specifying the device by its index in the list of
devices available for sniffing. To obtain the list of available devices, you can
use run Packetbeat like this: <code class="literal">packetbeat -devices</code>. This is especially useful
on Windows where device names are long. The following example will setup
sniffing on the first interface available:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: 0</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_snaplen"></a>snaplen<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The <span class="strong"><strong>snaplen</strong></span> option controls the maximum size of the packets to capture. The
default is 65535 which is large enough for almost all networks and interfaces
types. If you sniff on a physical network interface, you can optimize this by
setting it to the MTU size. On virtual interfaces, however, it’s safer to leave
this to the default value.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  snaplen: 1514</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_type"></a>type<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Packetbeat supports three sniffer types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">pcap</code> which uses the libpcap library and works on most platforms, but
   it’s not the fastest option.
</li><li class="listitem">
<code class="literal">af_paket</code> which uses memory mapped sniffing. It is faster than libpcap
   and doesn’t require a kernel module, but it is Linux specific.
</li><li class="listitem">
<code class="literal">pf_ring</code> which makes use of an ntop.org
   <a class="ulink" href="http://www.ntop.org/products/pf_ring/" target="_top">project</a>. This will get you the best
   sniffing speed but requires a kernel module and is Linux specific.
</li></ul></div><p>The default sniffer is <code class="literal">pcap</code>. Here is an example configuration that switches
to the <code class="literal">af_packet</code> sniffing type:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  type: af_packet</pre></div><p>If you are on Linux and you are trying to optimize the CPU usage of the shipper,
we recommend trying the <code class="literal">af_packet</code> and <code class="literal">pf_ring</code> options. Read this
<a class="ulink" href="http://packetbeat.com/blog/sniffing-performance-and-ipv6.html" target="_top">blog post</a>
for some details.</p><p>If you use the <code class="literal">af_packet</code> sniffer, you can tune its behaviour with the
following options:</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_buffer_size_mb"></a>buffer_size_mb<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This option controls the maximum size of the shared memory buffer to use
between the kernel and user space. A bigger buffer usually results in lower CPU
usage, but consumes more memory. This setting is only available for the
<code class="literal">af_packet</code> sniffer type. The default is 30 MB.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  type: af_packet
  buffer_size_mb: 100</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_with_vlans"></a>with_vlans<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Packetbeat automatically generates a
<a class="ulink" href="https://en.wikipedia.org/wiki/Berkeley_Packet_Filter" target="_top">BPF</a> for capturing only
the traffic on the ports on which the known protocols are expected to be found.
For example, if you have configured port 80 for HTTP and port 3306 for MySQL,
Packetbeat will generate the following BPF filter: <code class="literal">"port 80 or port 3306"</code>.</p><p>However, if the traffic contains <a class="ulink" href="https://en.wikipedia.org/wiki/IEEE_802.1Q" target="_top">VLAN</a>
tags, the above filter is ineffective because the offset used are moved with
four bytes. To fix this, you can enabled the <code class="literal">with_vlans</code> option, which will
generate a BPF filter looking like this: <code class="literal">"port 80 or port 3306 or (vlan and (port 80 or port 3306))"</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_bpf_filter"></a>bpf_filter<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Packetbeat automatically generates a
<a class="ulink" href="https://en.wikipedia.org/wiki/Berkeley_Packet_Filter" target="_top">BPF</a> for capturing only
the traffic on the ports on which the known protocols are expected to be found.
For example, if you have configured port 80 for HTTP and port 3306 for MySQL,
Packetbeat will generate the following BPF filter: <code class="literal">"port 80 or port 3306"</code>.</p><p>With this setting, you can overwrite the generated BPF filter. For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">interfaces:
  device: eth0
  bpf_filter: "net 192.168.238.0/0 and port 80 and port 3306"</pre></div><p>Note that this setting disables the automatic generation of the BPF filter so if
you use it, it is your responsibility to keep the BPF filters in sync with the
ports defined in the protocols sections.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-protocols"></a>Protocols<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>A section for each supported protocol is defined to configure options like
<code class="literal">ports</code>, <code class="literal">send_request</code>, <code class="literal">send_response</code> or options that are protocol specific.</p><p>Currently, Packetbeat supports the following protocols:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
HTTP
</li><li class="listitem">
Mysql
</li><li class="listitem">
PostgreSQL
</li><li class="listitem">
Redis
</li><li class="listitem">
Thrift-RPC
</li><li class="listitem">
MongoDB
</li><li class="listitem">
Memcache
</li></ul></div><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">protocols:
  http:
    ports: [80, 8080, 8000, 5000, 8002]

  memcache:
    ports: [11211]

  mysql:
    ports: [3306]

  redis:
    ports: [6379]

  pgsql:
    ports: [5432]

  thrift:
    ports: [9090]</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_common_protocol_options"></a>Common protocol options<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following options are available for all protocols:</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_ports"></a>ports<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The Packetbeat shipper installs a BPF filter based on the ports configured in
this section.
If a packet doesn’t match the filter, very little CPU is required to discard
the packet. The shipper also uses the ports configured here to decide which
parser to use for each packet.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_send_request"></a>send_request<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If this option is enabled, the raw message of the request (<code class="literal">request</code> field) is
sent to Elasticsearch. The default is false. This is useful in case you want to
index the whole request. Note that for HTTP, the body is not included by
default, only the HTTP headers.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_send_response"></a>send_response<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If this option is enabled, the raw message of the response (<code class="literal">response</code> field)
is sent to Elasticsearch. The default is false.  This is useful in case you
want to index the whole request. Note that for HTTP, the body is not included
by default, only the HTTP headers.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_http_configuration"></a>HTTP configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The Http protocol has several specific configuration options. Here is a
sample configuration section:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">protocols:
  http:

    # Configure the ports where to listen for HTTP traffic. You can disable
    # the http protocol by commenting the list of ports.
    ports: [80, 8080, 8000, 5000, 8002]

    # Uncomment the following to hide certain parameters in URL or forms attached
    # to HTTP requests. The names of the parameters are case insensitive.
    # The value of the parameters will be replaced with the 'xxxxx' string.
    # This is generally useful for avoiding storing user passwords or other
    # sensitive information.
    hide_keywords: ["pass", "password", "passwd"]

    # Uncomment the following to export a list of extra HTTP headers. By
    default is none sent.
    send_headers: ["User-Agent", "Cookie", "Set-Cookie"]

    # Uncomment the following to export Cookie or Set-Cookie headers. By
    # default is false.
    split_coookie: true

    # Configure the HTTP header that contains the real IP address.
    real_ip_header: "X-Forwarded-For"</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_hide_keywords"></a>hide_keywords<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The Packetbeat shipper has the option of automatically censor certain strings
from the transactions it saves. This is done because while the SQL traffic
typically only contains the hashes of the passwords, it is possible that the
HTTP traffic contains sensitive data. In order to reduce the security risks,
the shipper can automatically avoid sending the contents of certain HTTP POST
parameters. The sensitive content associated with these keywords is replaced
by ``xxxxx``. By default, no changes are made to the HTTP messages.</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This option replaces query parameters from GET requests and top level
parameters from POST requests. If the sensitive data is encoded inside a
parameter with a different name, we cannot censor it there. Also, note that if
you enable saving the raw request and response fields (see the <code class="literal">send_requset</code>
and the <code class="literal">send_response</code> options), the sensitive data will be present in those
fields.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_strip_authorisation"></a>strip_authorisation<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If enabled, this option hides the value of the <code class="literal">Authorization</code> HTTP header.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_send_headers"></a>send_headers<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>A list of header names to be captured and send to Elasticsearch. These
headers are placed under the <code class="literal">headers</code> dictionary in the resulting JSON.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_send_all_headers"></a>send_all_headers<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Alternatively to sending a white list of headers to Elasticsearch, you can
send all headers by setting this option to true. The default is false.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_include_body_for"></a>include_body_for<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The list of content types for which Packetbeat includes the full HTTP payload in
the <code class="literal">response</code> field. Should be used together with the <code class="literal">send_response</code> option.</p><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yml">protocols:
  http:
    ports: [80, 8080]
    send_response: true
    include_body_for: ["text/html"]</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_split_cookie"></a>split_cookie<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If the <code class="literal">Cookie</code> or <code class="literal">Set-Cookie</code> headers are sent, this option controls whether
they are split into individual values. For example, with this option set, a
HTTP response might result in the following JSON:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">"response": {
  "code": 200,
  "headers": {
    "connection": "close",
    "content-language": "en",
    "content-type": "text/html; charset=utf-8",
    "date": "Fri, 21 Nov 2014 17:07:34 GMT",
    "server": "gunicorn/19.1.1",
    "set-cookie": { <a id="CO1-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "csrftoken": "S9ZuJF8mvIMT5CL4T1Xqn32wkA6ZSeyf",
      "expires": "Fri, 20-Nov-2015 17:07:34 GMT",
      "max-age": "31449600",
      "path": "/"
    },
    "vary": "Cookie, Accept-Language"
  },
  "phrase": "OK"
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Note that <code class="literal">set-cookie</code> is a map having the cookie names as keys.
</p></td></tr></table></div><p>The default is false.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_real_ip_header"></a>real_ip_header<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The header field to extract the real IP from. This is often useful when
capturing behind a reverse proxy and still wanting to get the geo-location
information. If this header is present and contains a valid IP addresses, the
information is used for the <code class="literal">real_ip</code> and <code class="literal">client_location</code> indexed
fields.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memcache_configuration"></a>Memcache configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">  memcache:
    ports: [11211]
    parseunknown: false
    maxvalues: 0
    maxbytespervalue: 100
    udptransactiontimeout: 200
    tcptransactiontimeout: 200</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_parseunknown"></a>parseunknown<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Force memcache text protocol parser to accept unknown commands.
Note: All unknown commands MUST NOT contain a data part.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_maxvalues"></a>maxvalues<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum number of values to store in message (multi-get).
All values will be base64 encoded.</p><p>possible values:
  maxvalue: -1  - store all values (text based protocol multi-get)
  maxvalue: 0   - store no values at all (default)
  maxvalue: N   - store up to N values</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_maxbytespervalue"></a>maxbytespervalue<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Limit the number of bytes to be copied per value element.</p><p>Note:
values will be base64 encoded, so actual size in json document will be 4 times
maxbytespervalue.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_udptransactiontimeout"></a>udptransactiontimeout<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Transaction timeout in milliseconds. Default 200ms.</p><p>Note:
Quiet messages in UDP binary protocol will get response only in error case.
The memcache protocol analyzer will wait for udptransactiontimeout milliseconds
before publishing quiet messages. Non quiet messages or quiet requests with
error response will not have to wait for the timeout</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_tcptransactiontimeout"></a>tcptransactiontimeout<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Transaction timeout in milliseconds. Default 200ms.</p><p>Time until all unfinished tcp based transactions will be published if there is
no activity on the TCP stream.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mysql_and_pgsql_configuration"></a>MySQL and PgSQL configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_max_rows"></a>max_rows<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum number of rows from the SQL message to publish to Elasticsearch. The
default is 10 rows in order to publish data as little as needed.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_max_row_length"></a>max_row_length<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum length in bytes of a row from the SQL message to publish to
Elasticsearch. The default is 1024 bytes.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-thrift"></a>Thrift configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Thrift protocol has several specific configuration options. Here is a
sample configuration section:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">  thrift:
    transport_type: socket
    protocol_type: binary
    idl_files: ["tutorial.thrift", "shared.thrift"]
    string_max_size: 200
    collection_max_size: 20
    capture_reply: true
    obfuscate_strings: true
    drop_after_n_struct_fields: 100</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_transport_type"></a>transport_type<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Thrift transport type. Currently this option accepts the options <code class="literal">socket</code>
for TSocket which is the default Thrift transport and <code class="literal">framed</code> which
corresponds to the TFramed Thrift transport. The default is <code class="literal">socket</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_protocol_type"></a>protocol_type<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Thrift protocol type. Currently the only accepted value is <code class="literal">binary</code>
corresponding to the TBinary protocol, which is the default Thrift protocol.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_idl_files"></a>idl_files<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The Thrift Interface description language (IDL) files for the service that the
shipper is monitoring. Providing the IDL files is optional, because the Thrift
messages contain enough information to decode them without having the IDL
files. However, providing the IDL will additionally fill in parameter and
exceptions names.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_string_max_size"></a>string_max_size<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If a string from one of the parameters or from the return value is longer than
this value, the string is automatically truncated to this length. Dots are added
at the end of the string to mark that it was truncated. The default is 200.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_collection_max_size"></a>collection_max_size<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If a Thrift list, set, map or structure has more elements than this value, only
this many number of elements will be captured. A fictive last element <code class="literal">...</code> is
added at the end to mark that the collection was truncated. The default is 15.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_capture_reply"></a>capture_reply<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If set to false, the Packetbeat shipper only decodes the method name from
the reply and simply skip the rest of the response message. This can be useful
for performance, disk usage or data retention reasons. The default is true.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_obfuscate_strings"></a>obfuscate_strings<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If enabled, this option replaces all strings found in the method parameters or
in the return code or in the exception structures with the <code class="literal">"*"</code> string.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_drop_after_n_struct_fields"></a>drop_after_n_struct_fields<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If a structure has more fields than this given value, the Packetbeat shipper will
ignore the whole transaction. This is a memory protection mechanism (so that
the shipper’s memory doesn’t grow indefinitely), so you would topically set this
to a relatively high value. The default is 500.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-mongodb"></a>MongoDB configuration<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following settings are specific to the MongoDB protocol. Here is a sample
configuration section:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">  mongodb:
    send_request: true
    send_response: true
    max_docs: 0
    max_doc_length: 0</pre></div><p>The following two settings are useful for limiting the amount of data
Packetbeat indexes in the <code class="literal">response</code> fields.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_max_docs"></a>max_docs<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum number of docs from the response to index in the <code class="literal">response</code> field. The
default is 10. You can set this to 0 to index an unlimited number of documents.</p><p>A <code class="literal">[...]</code> line is added automatically at the end to signify that there were
more documents but they weren’t saved because of this setting.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_max_doc_length"></a>max_doc_length<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum number of characters in a single document indexed in the <code class="literal">resposne</code>
field. The default is 5000. You can set this to 0 to index an unlimited number
of characters per document.</p><p>If the document is trimmed because of this setting, the string ` …` is added
at the end of it.</p><p>Note that limiting documents this way means that they are no longer correctly
formatted JSON objects.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-output"></a>Outputs<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Starting with Packetbeat version 0.3.0, multiple outputs can be configured for
exporting the correlated transactions. Currently the following output types are
supported:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Elasticsearch
</li><li class="listitem">
Redis
</li><li class="listitem">
File
</li></ul></div><p>One or multiple outputs can be enabled at a time. The output plugins are
responsible for sending the transaction data in JSON format to the next step in
the pipeline. In addition, they are also responsible for maintaining the
network topology.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="maintaining-topology"></a>Maintaining the real-time state of the network topology<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>One of the important features of Packetbeat is that it knows for each
transaction which is the source server and is the destination server by names.
It does this without the requirement of maintaining a central configuration.
Instead each shipper notes the hostname of the server on which it runs on, and
maps that to the list of IP addresses of that server. This information is
shared between shippers by using the mechanisms provided by the output plugins.</p><p>For example, the Redis output plugin stores the topology in a dedicated Redis
database and the Elasticsearch output plugin stores the topology in an
Elasticsearch index.</p><p>While multiple output plugins can be enabled at the same time, only one of them
can be used for sharing the topology. If you have both Redis and Elasticsearch
enabled as outputs, we suggest using Redis for saving the topology. This can be
controlled from the <code class="literal">save_topology</code> configuration option.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_elasticsearch_output"></a>Elasticsearch Output<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Sends the transactions directly to Elasticsearch by using the Elasticsearch
HTTP API.</p><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">output:
  elasticsearch:
    # Uncomment out this option if you want to output to Elasticsearch. The
    # default is false.
    enabled: true

    # Set the host and port where to find Elasticsearch.
    hosts: ["localhost:9200"]

    # Optional protocol and basic auth credentials
    # protocol: "https"
    # username: "admin"
    # password: "s3cr3t"

    # Comment this option if you don't want to store the topology in
    # Elasticsearch. The default is false.
    save_topology: true

    # Optional index name. The default is packetbeat and generates
    # [packetbeat-]YYYY.MM.DD keys.
    index: "packetbeat"

    # Optional HTTP Path
    path: "/elasticsearch"</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_enabled"></a>enabled<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Boolean option that enables Elasticsearch as output. The default is true.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_hosts"></a>hosts<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The list of Elasticsearch nodes to which to connect. The events are distributed to
these nodes in round robin order. If one node becomes unreachable, the event is
automatically sent to another node.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_host"></a>host<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The host of the Elasticsearch server. This option is deprecated and only used if
the <code class="literal">hosts</code> option is not present.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_port"></a>port<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The port of the Elasticsearch server. This option is deprecated and only used if
the <code class="literal">hosts</code> option is not present.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_protocol"></a>protocol<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The name of the protocol Elasticsearch is reachable on. The options are:
<code class="literal">http</code> or <code class="literal">https</code>. The default is <code class="literal">http</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_username"></a>username<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Basic authentication username for connecting to Elasticsearch.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_password"></a>password<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Basic authentication password for connecting to Elasticsearch.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_index"></a>index<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The index root name where to write events to. The default is <code class="literal">packetbeat</code> and
generates <code class="literal">[packetbeat-]YYYY.MM.DD</code> indexes (e.g. <code class="literal">packetbeat-2015.04.26</code>).</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_max_retries"></a>max_retries<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The number of times a particular Elasticsearch index operation is attempted. If
the indexing operation doesn’t succeed after this many retries, the events are
dropped. The default is 3.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_bulk_max_size"></a>bulk_max_size<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The maximum number of events to bulk in a single Elasticsearch bulk API index request.
The default is 10000.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_flush_interval"></a>flush_interval<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The number of seconds to wait for new events between two bulk API index requests.
If <code class="literal">bulk_max_size</code> is reached before this interval expires, addition bulk index
requests are made.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_path"></a>path<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>An HTTP path prefix that is prepended to the HTTP API calls. This is useful for
the cases where Elasticsearch listens behind an HTTP reverse proxy that exports
the API under a custom prefix.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_save_topology"></a>save_topology<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Boolean that sets if the topology is kept in Elasticsearch. The default is
false. See <a class="xref" href="configuration.html#maintaining-topology" title="Maintaining the real-time state of the network topology">Maintaining the real-time state of the network topology</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_topology_expire_2"></a>topology_expire<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The time to live in seconds for the topology information that is stored in
Elasticsearch. The default is 15 seconds.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="redis-output"></a>Redis Output<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Inserts the transaction in a Redis list. This output plugin is compatibile with
<a class="ulink" href="http://logstash.net/docs/1.4.2/inputs/redis" target="_top">Redis input plugin</a> from Logstash,
so Redis can be used as queue between the Packetbeat shippers and Logstash.</p><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">output:

  redis:
    # Uncomment out this option if you want to output to Redis. The default is false.
    enabled: true

    # Set the host and port where to find Redis.
    host: "localhost"
    port: 6379

    # Uncomment out this option if you want to store the topology in Redis.
    # The default is false.
    save_topology: true

    # Optional index name. The default is packetbeat and generates packetbeat keys.
    index: "packetbeat"

    # Optional Redis database number where the events are stored
    # The default is 0.
    db: 0

    # Optional Redis database number where the topology is stored
    # The default is 1. It must have a different value than db.
    db_topology: 1

    # Optional password to authenticate with. By default, no
    # password is set.
    # password: ""

    # Optional Redis initial connection timeout in seconds.
    # The default is 5 seconds.
    timeout: 5

    # Optional interval for reconnecting to failed Redis connections.
    # The default is 1 second.
    reconnect_interval: 1</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_enabled_2"></a>enabled<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Boolean option that enables Redis as output. The default is false.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_host_2"></a>host<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Host of the Redis server.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_port_2"></a>port<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Port of the Redis server.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_db"></a>db<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Redis database number where the events are published. The default is 0.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_db_topology"></a>db_topology<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Redis database number where the topology information is stored. The default is 1.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_index_2"></a>index<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Name of the Redis list where the events are published. The default is
<code class="literal">packetbeat</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_password_2"></a>password<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Password to authenticate with. The default is no authentication.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_timeout"></a>timeout<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Redis initial connection timeout in seconds. The default is 5 seconds.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_reconnect_interval"></a>reconnect_interval<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Interval for reconnecting failed Redis connections. The default is 1 second.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_file_output"></a>File Output<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">output:

  # File as output
  # Options:
  # path: where to save the files
  # filename: name of the files
  # rotate_every_kb: maximum size of the files in path
  # number of files: maximum number of files in path
  file:
    enabled: true
    path: "/tmp/packetbeat"
    filename: packetbeat
    rotate_every_kb: 1000
    number_of_files: 7</pre></div><p>Dumps the transactions in a file where each transaction is in a JSON format.
Currently, this output is used for testing, but it can be used as input for
Logstash.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_enabled_3"></a>enabled<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Boolean option that enables File as output. The default is false.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_path_2"></a>path<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Path to the directory where to save the generated files. The option is
mandatory.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_filename"></a>filename<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Name of the generated files. The default is <code class="literal">packetbeat</code> and it generates files: <code class="literal">packetbeat</code>, <code class="literal">packetbeat.1</code>, <code class="literal">packetbeat.2</code>, etc.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_rotate_every_kb"></a>rotate_every_kb<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum size in kilobytes of each file. When this size is reached, the files are
rotated. The default value is 10 MB.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_number_of_files"></a>number_of_files<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Maximum number of files under path. When this number of files is reached, the
oldest file is deleted and the rest are shifted from last to first. The default
is 7 files.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-processes"></a>Processes (optional)<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>This section is optional, but configuring the processes enables Packetbeat
shipper to not only show you between which servers the traffic is flowing, but
also between which processes. It can even show you the traffic between two
processes running on the same host, so this is particularly useful when you
have more services running on the same server. By default, process matching
is disabled.</p><p>When it starts (and then periodically) the shipper scans the process table for
processes matching the configuration file. For each of these processes, it
monitors which file descriptors it has opened. When a new packet is captured,
it reads the list of active TCP connections and matches the corresponding one
with the list of file descriptors.</p><p>On a Linux system, all this information is available via the <code class="literal">/proc</code>
filesystem, so the Packetbeat shipper doesn’t need a kernel module.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Process monitoring is currently only supported on
      Linux systems. The Packetbeat shipper automatically disables
      it when it detects other operating systems.</p></div></div><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">procs:
  enabled: true
  monitored:
    - process: mysqld
      cmdline_grep: mysqld

    - process: pgsql
      cmdline_grep: postgres

    - process: nginx
      cmdline_grep: nginx

    - process: app
      cmdline_grep: gunicorn</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options_3"></a>Options<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_process"></a>process<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The <code class="literal">process</code> option for each process defines the name of the process, as it
appears in the published transactions. The name doesn’t have to match the name
of the executable, feel free to choose something more descriptive (e.g. "my
app" instead of "gunicorn")</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_cmdline_grep"></a>cmdline_grep<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This option for each process is used to identify the process at
runtime. When it starts, and then periodically, the shipper scans the process table for
processes matching ‘cmdline_grep` option. The match is done against the
process’ command line as read from <code class="literal">/proc/&lt;pid&gt;/cmdline</code>.</p><p>For each of these processes, it monitors which file descriptors it has opened.
When a new packet is captured, it reads the list of active TCP connections and
matches the corresponding one with the list of file descriptors.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-run-options"></a>Run options (optional)<a href="https://github.com/elastic/packetbeat/edit/1.0.0-beta3/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The Packetbeat shipper can drop privileges after creating the sniffing socket.
Root access is required for opening the socket but everything else requires no
privileges. Therefore, it is recommended to have the shipper switch users after
the initialization phase.  <code class="literal">uid</code> and <code class="literal">gid</code> settings set the User Id and Group
Id under which the shipper will run.</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Because on Linux Setuid doesn’t change the uid of all threads, the Go
         garbage collector will continue to run as root. Also, note that process
         monitoring only works when running as root.</p></div></div><p>Example configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">runoptions:
  uid=501
  gid=501</pre></div></div></div><div class="navfooter"><span class="prev"><a href="packetbeat-getting-started.html">
              « 
              Getting started</a>
           
        </span><span class="next">
           
          <a href="capturing-options.html">Traffic capturing options
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="http://www.elastic.co/webinars/getting-started-with-elasticsearch/?elektra=docs">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to Our Newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/bltda40eebd7c7cae9a/facebook.svg") no-repeat;}		
	
		.twitter{background:url("/assets/bltfd3b1511512f4632/twitter.svg") no-repeat;}		
	
		.linkedin{background:url("/assets/blt6b4f6f8d6b96f814/linkedin.svg") no-repeat;}		
	
		.xing{background:url("/assets/blta76b2ae2b2f10a98/xing.svg") no-repeat;}		
	
		.youtube{background:url("/assets/blt5761648c9581fb53/youtube.svg") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="/static/js/jquery.autocomplete.js"></script>
<script src="/static/js/script.js?clr=122"></script>
   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/logo-elastic-xsmall.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        